<div class="col-md-10 offset-md-1">
  <br>
<%= form_with(url: home_path, model: profile, local: true) do |form| %>
  <% if profile.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(profile.errors.count, "error") %> prohibited this profile from being saved:</h2>

      <ul>
      <% profile.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <fieldset>
    <div class="form-group row">
      <label class="col-md-5 control-label" for="textinput">
        <%= form.label :country, "¿Dónde residís actualmente?" %>
        <small>(Ciudad, Provincia o Región, País.)</small>
      </label>
      <div class="col-md-7">
        <% countries = CS.get.collect {|a| [a[1], a[0]]} %>
        <% countries.unshift ['Selecciona tu País',''] %>
        <%= form.select(:country, countries,{},{id: :countries, class: 'custom-select'}) -%>

        <% states = CS.get(profile.country).collect {|a| [a[1], a[0]]} %>
        <% states.unshift ['Selecciona tu Región',''] %>
        <%= form.select(:state, states,{},{id: :states, class: 'custom-select'}) -%>

        <% cities = [] %>
        <%  CS.get(profile.country,profile.state).each_with_index do |val,index| %>
          <% cities.push [val,index] %>
        <% end %>
        <% cities.unshift ['Selecciona tu ciudad',''] %>
        <%= form.select(:city, cities,{},{id: :cities, class: 'custom-select'}) -%>

      </div>
    </div>

    <div class="form-group row">
      <label class="col-md-5 control-label" for="textinput">
        <%= form.label :role, "¿Qué rol desempeñarías en la hackaton?" %>
      </label>

      <div class="col-md-7">
        <% roles = Role::ALL.map { |role| [role, role] } %>
        <%=
          form.select(
            :role,
            roles,
            {
                prompt: 'Selecciona tu rol',
            },
            {
                id: :roles,
                class: 'custom-select',
            },
          )
        %>
      </div>
    </div>

    <script>
        var country = null;
        $('#countries').change(function () {
            country = $(this).val();
            var states = $("#states");
            if($(this).val() == "") {
                states.append("");
            } else {
                $.getJSON('/cities/' + country, function (data) {
                    var opt = '<option value="" selected="">Selecciona tu región</option>';
                    if(data.length == 0){
                      console.log('ups... consultando region...' + data);
                    } else {
                        $.each(data, function(i) {
                            opt += '<option value='+ i +'>' + data[i] + '</option>';
                            states.html(opt);
                        });
                    }
                });
            }
        });

        $('#states').change(function () {
            var cities = $("#cities");
            if($(this).val() == "") {
                cities.html("");
            } else {
                $.getJSON('/cities/' + country + '/' + $(this).val(), function (data) {
                    var opt = '<option value="" selected="">Selecciona tu ciudad</option>';
                    if(data.length == 0){
                        console.log('ups... consultando ciudad...')
                    } else {
                        $.each(data, function(i) {
                            opt += '<option value='+ i +'>' + data[i] + '</option>';
                            cities.html(opt);
                        });
                    }
                });
            }
        });
    </script>

    <div class="form-group row">
      <label class="col-md-5 control-label" for="textinput">
        <%= form.label :first_time, "¿Es la primera vez que participás en Devs4Good?" %>
      </label>
      <div class="col-md-7">
        <%= form.select :first_time, [['Si', true], ['No', false]],{},{id: :profile_first_time, class: 'custom-select'}  %>
      </div>
    </div>

    <div class="form-group row">
      <label class="col-md-5 control-label" for="textinput">
        <%= form.label :expectancy, "¿Qué esperás del evento? ¿Por qué te interesa participar?" %>
      </label>
      <div class="col-md-7">
        <%= form.text_area :expectancy, id: :profile_expectancy, class: 'form-control input-md',style: 'height:100%;' %>
      </div>
    </div>

    <div class="form-group row">
      <label class="col-md-5 control-label" for="textinput">
        <%= form.label :heard_or_see_d4g, "¿Dónde fue la primera vez que viste/escuchaste sobre Devs4Good?" %>
      </label>
      <div class="col-md-7">
        <%= form.text_area :heard_or_see_d4g, id: :profile_heard_or_see_d4g, class: 'form-control input-md',style: 'height:100%;' %>
      </div>
    </div>

    <div class="form-group row">
      <label class="col-md-5 control-label" for="textinput">
        <%= form.label :tech_stack, "¿Con qué tecnologías/stack tecnológico te sentís más cómodo/a?" %>
      </label>
      <div class="col-md-7">
        <%= form.text_area :tech_stack, id: :profile_tech_stack, class: 'form-control input-md',style: 'height:100%;' %>
      </div>
    </div>

    <div class="form-group row">
      <label class="col-md-5 control-label" for="textinput">
        <%= form.label :owned_projects, "Contanos algún proyecto en el que hayas participado o creado desde cero y del cuál te sentís orgulloso ¿Por qué te gustó? (ideal si lo podes compartir un link)" %>
      </label>
      <div class="col-md-7">
        <%= form.text_area :owned_projects, id: :profile_owned_projects, class: 'form-control input-md',style: 'height:100%;' %>
      </div>
    </div>

    <div class="form-group row">
      <label class="col-md-5 control-label" for="textinput">
        <%= form.label :hobbies, "¿Cuáles son tus intereses? ¿Tocás instrumentos? ¿Hacés deporte? ¿Tenés algún hobby?" %><br>
        <small>Mencioná aquello que te interesa. No necesariamente tiene que estar relacionado con Devs4Good. Queremos saber cuáles son las cosas que te encantan, además de la tecnología.</small>
      </label>
      <div class="col-md-7">
        <%= form.text_area :hobbies, id: :profile_hobbies, class: 'form-control input-md',style: 'height:100%;' %>
      </div>
    </div>

    <div class="form-group row">
      <label class="col-md-5 control-label" for="textinput">
        <%= form.label :bring, 'No todo es codear! Contanos qué "cosas" podrías traer al evento:' %><br>
        <small>Instrumentos, parlantes, juegos... ¡lo que sea!</small>
      </label>
      <div class="col-md-7">
        <%= form.text_area :bring, id: :profile_bring, class: 'form-control input-md',style: 'height:100%;' %>
      </div>
    </div>

    <div class="form-group row">
      <label class="col-md-5 control-label" for="textinput">
        <%= form.label :proposal, '¿Te gustaría hacer alguna propuesta que
        quieras llevar adelante para que éste sea un gran evento?' %><br>
        <small>Te invitamos a escribir una propuesta para hacer del evento 
          un momento inolvidable.
          También podés escribir una idea inicial para que pienses en ello
          y elabores algo para realizar durante el evento. No es obligación y no hay límites. </small>
      </label>
      <div class="col-md-7">
        <%= form.text_area :proposal, id: :profile_proposal, class: 'form-control input-md',style: 'height:100%;' %>
      </div>
    </div>

    <div class="form-group row">
      <label class="col-md-5 control-label" for="textinput">
        <%= form.label :bio, 'Contanos más sobre vos:' %><br>
        <small>Cualquier cosa que ayude a que te conozcamos mejor y que sientas que no pudiste contar con las respuestas anteriores. Formación, qué objetivo perseguís diariamente con tu trabajo, familia, algo que creas que puedes brindar al evento, etc.</small>
      </label>
      <div class="col-md-7">
        <%= form.text_area :bio, id: :profile_bio, class: 'form-control input-md',style: 'height:100%;' %>
      </div>
    </div>

    <div class="form-group row">
      <label class="col-md-5 control-label" for="textinput">
        <%= form.label :gender_id, "¿Qué corte de camiseta preferís?" %>
      </label>
      <div class="col-md-7">
        <%= form.select(:gender_id, Gender.all.collect {|a| [a.name, a.id]},{},{id: :profile_gender_id, class: 'custom-select'}) -%>
        <image src="/img/camisetas.png" />
      </div>
    </div>

    <div class="form-group row">
      <label class="col-md-5 control-label" for="textinput">
        <%= form.label :size_id, "¿Qué talle de camiseta preferís?" %>
      </label>
      <div class="col-md-7">
        <%= form.select(:size_id, Size.all.collect {|a| [a.name, a.id]},{},{id: :profile_size_id, class: 'custom-select'}) -%>
        <table class="table table-hover">
          <thead>
            <tr><th scope="col"colspan="2">Recto</th><th> </th><th colspan="2" scope="col">Entallado</th></th></tr>
          </thead>
          <tbody>
            <tr><td>S   </td><td>48 x 67 cm</td><td> </td><td>S   </td><td>43 x 62 cm</td></tr>
            <tr><td>M   </td><td>50 x 70 cm</td><td> </td><td>M   </td><td>45 x 64 cm</td></tr>
            <tr><td>L   </td><td>53 x 73 cm</td><td> </td><td>L   </td><td>48 x 67 cm</td></tr>
            <tr><td>XL  </td><td>56 x 76 cm</td><td> </td><td>XL  </td><td>51 x 70 cm</td></tr>
            <tr><td>XXL </td><td>59 x 80 cm</td><td> </td><td>XXL </td><td>54 x 73 cm</td></tr>
            <tr><td>XXXL</td><td>60 x 82 cm</td><td> </td><td> </td><td> </td></tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="form-group row">
      <label class="col-md-5 control-label" for="textinput">
        <%= form.label :phonenumber, 'Dejanos tu número de telefono' %><br>
        </label>
        <div class="col-md-7">
          <%= form.text_field :phonenumber, id: :profile_phonenumber, class: 'form-control input-md' %>
        </div>
    </div>

    <div class="form-group row">
      <label class="col-md-5 control-label" for="textinput">
        <%= form.label :telegram, 'id de telegram:' %><br>
        <small>Solemos usar Telegram para comunicarnos, si no lo tenés, es una buena idea instalarlo en tu móvil.</small>
      </label>
      <div class="col-md-7">
        <%= form.text_field :telegram, id: :profile_telegram, class: 'form-control input-md' %>
      </div>
    </div>

    <div class="form-group row">
      <label class="col-md-5 control-label" for="textinput">
        <%= form.label :linkedin, 'Perfil de Linkedin.com' %>
      </label>
      <div class="col-md-7">
        <%= form.text_field :linkedin, id: :profile_linkedin, class: 'form-control input-md' %>
      </div>
    </div>

    <div class="row align-items-center">
      <p class="col-md-12 text-center">¡Gracias por tu interés en <%= aoc_name %>! </p>
    </div>

    <p class="col-md-12 text-center">
      No olvides hacer clic en
      "¡Quiero postularme para asistir a D4G!"
      para terminar el proceso.
    </p>
    <p class="col-md-12 text-center">
      Estaremos en contacto contigo vía email y mediante nuestras redes sociales.<br>
      Encuéntranos en Facebook: <a href="https://www.facebook.com/devs4good/">Developers for Good</a>
      Twitter: <a href="https://twitter.com/Devs4Good">@Devs4Good</a></p>

    <div class="form-group row">
      <div class="col-md-12 text-center">
        <%= form.submit "¡Quiero postularme para asistir a D4G!", class: "btn btn-primary" %>
      </div>
    </div>
  </fieldset>
<% end %>
</div>